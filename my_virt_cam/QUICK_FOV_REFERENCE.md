# Быстрая справка FOV (обновлено: FOV_MAX = 65°)

## Таблица соответствия радиуса и FOV

При `target_ball_size = 0.055` (по умолчанию):

| Радиус (px) | base_fov | Финальный FOV | Нажатий E от старта |
|-------------|----------|---------------|---------------------|
| 5           | 30.0°    | 40.0° (min)   | -                   |
| 10          | 34.75°   | 40.0° (min)   | -                   |
| 15          | 39.5°    | 40.0° (min)   | -                   |
| 20 ★        | 44.25°   | 44.25°        | 0 (default)         |
| 25          | 49.0°    | 49.0°         | ~3                  |
| 30          | 53.75°   | 53.75°        | ~5                  |
| 35          | 58.5°    | 58.5°         | ~8                  |
| 40          | 63.25°   | 63.25°        | ~10                 |
| 45          | 68.0°    | 65.0° ⚠️     | ~13                 |
| 48          | 70.85°   | 65.0° ⚠️     | ~14                 |
| 50+         | 73.75°+  | 65.0° ⚠️     | 15+                 |
| 60          | 82.25°   | 65.0° ⚠️     | 20                  |

★ = значение по умолчанию
⚠️ = упирается в максимум FOV_MAX

---

## Рекомендуемые настройки

### Для разных режимов просмотра:

| Режим                    | Радиус (px) | FOV    | Клавиши от R  |
|--------------------------|-------------|--------|---------------|
| Детальный план мяча      | 10-15       | 40°    | Q Q Q Q Q     |
| Нормальный обзор ★       | 20          | 44°    | R (сброс)     |
| Средний обзор            | 30          | 54°    | E E E E E     |
| Широкий обзор            | 40          | 63°    | E×10          |
| **Максимальный обзор**   | 48+         | **65°**| E×14+         |

---

## Формула для расчёта нужного радиуса

Если вы хотите конкретный FOV (в диапазоне 40-65°):

```
Нужный FOV = 44.25 + (N × 2.0) × 0.95

где N - количество нажатий E от дефолта (radius=20)
```

**Примеры:**
- Хочу FOV 50°: `(50 - 44.25) / 0.95 / 2 ≈ 3 нажатия E`
- Хочу FOV 60°: `(60 - 44.25) / 0.95 / 2 ≈ 8 нажатий E`
- Хочу FOV 65° (max): `14+ нажатий E`

---

## Влияние target_ball_size

Если изменить `target_ball_size` клавишами Z/X:

### При radius = 30px (base_fov = 53.75°):

| target_ball_size | zoom_factor | Финальный FOV |
|------------------|-------------|---------------|
| 0.03 (Z×5)       | 1.833       | 65.0° ⚠️     |
| 0.04 (Z×3)       | 1.375       | 65.0° ⚠️     |
| 0.055 (default)  | 1.0         | 53.75°        |
| 0.07 (X×2)       | 0.786       | 42.25°        |
| 0.10 (X×5)       | 0.55        | 40.0° (min)   |

⚠️ = упирается в максимум

---

## Быстрый старт

### Сценарий 1: "Хочу максимум 65°"
```
1. R (сброс)
2. E E E E E E E E E E E E E E (14 раз)
3. Готово: FOV = 65°
```

### Сценарий 2: "Хочу средний 55°"
```
1. R (сброс)
2. E E E E E (5 раз)
3. Готово: FOV ≈ 54°
```

### Сценарий 3: "Хочу близкий план 40°"
```
1. R (сброс)
2. Q Q Q Q Q (5 раз)
3. Готово: FOV = 40° (min)
```

---

## Мониторинг в реальном времени

Формат вывода:
```
⚽ Ball: (1200, 900) | R: 44.0px | FOV: 66.6° (→65.0°) | TS: 0.055 | Up: 204
```

- **R: 44.0px** - текущий радиус мяча
- **FOV: 66.6°** - реальный текущий FOV (с учётом сглаживания)
- **(→65.0°)** - целевой FOV (к которому движется камера)
- **TS: 0.055** - target_ball_size

Если `FOV` и целевой отличаются - камера ещё движется.
Если одинаковые - стабилизировалась.

---

## Изменение лимитов

Если 65° всё ещё много или мало:

**Файл:** `src/nvdsvirtualcam_config.h:41`
```cpp
constexpr float FOV_MAX = 65.0f;  // Измените на нужное значение
```

**Не забудьте:**
1. Пересобрать: `cd src && make`
2. Обновить лимит в Python: `test_virtual_camera_keyboard.py:168`
   ```python
   target_fov = max(40.0, min(65.0, base_fov * zoom_factor))  # Здесь тоже
   ```

---

✅ **Текущая конфигурация: FOV 40-65° (оптимально для 5700x1900)**
