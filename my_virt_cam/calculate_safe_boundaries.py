#!/usr/bin/env python3
"""
–†–∞—Å—á–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∫–∞–º–µ—Ä—ã
—á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —á–µ—Ä–Ω—ã—Ö –ø–æ–ª–æ—Å –ø—Ä–∏ –ª—é–±–æ–º FOV
"""

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–Ω–æ—Ä–∞–º—ã (–∏–∑ nvdsvirtualcam_config.h)
LON_MIN = -90.0  # –õ–µ–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
LON_MAX = +90.0  # –ü—Ä–∞–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞
LAT_MIN = -32.0  # –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞
LAT_MAX = +22.0  # –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞

# FOV –¥–∏–∞–ø–∞–∑–æ–Ω
FOV_MIN = 40.0
FOV_MAX = 68.0

# Aspect ratio
ASPECT_RATIO = 16.0 / 9.0

print("=" * 80)
print("–†–ê–°–ß–ï–¢ –ë–ï–ó–û–ü–ê–°–ù–´–• –ì–†–ê–ù–ò–¶ –í–ò–†–¢–£–ê–õ–¨–ù–û–ô –ö–ê–ú–ï–†–´")
print("=" * 80)

print(f"\nüìê –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞–Ω–æ—Ä–∞–º—ã:")
print(f"   –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å (YAW): {LON_MIN}¬∞ –¥–æ {LON_MAX}¬∞ (–ø–æ–∫—Ä—ã—Ç–∏–µ: {LON_MAX - LON_MIN}¬∞)")
print(f"   –í–µ—Ä—Ç–∏–∫–∞–ª—å (PITCH): {LAT_MIN}¬∞ –¥–æ {LAT_MAX}¬∞ (–ø–æ–∫—Ä—ã—Ç–∏–µ: {LAT_MAX - LAT_MIN}¬∞)")

print(f"\nüé• FOV –¥–∏–∞–ø–∞–∑–æ–Ω: {FOV_MIN}¬∞ - {FOV_MAX}¬∞")
print(f"   Aspect ratio: {ASPECT_RATIO:.2f} (16:9)")

print("\n" + "=" * 80)
print("–†–ê–°–ß–ï–¢ –ì–†–ê–ù–ò–¶ –î–õ–Ø PITCH (–≤–µ—Ä—Ç–∏–∫–∞–ª—å)")
print("=" * 80)

for fov in [FOV_MIN, 50.0, 60.0, FOV_MAX]:
    half_fov_v = fov / 2.0

    # –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞ –∫–∞–º–µ—Ä—ã
    pitch_min_safe = LAT_MIN + half_fov_v
    pitch_max_safe = LAT_MAX - half_fov_v

    freedom = pitch_max_safe - pitch_min_safe

    print(f"\nFOV = {fov}¬∞:")
    print(f"   half_fov (–≤–µ—Ä—Ç–∏–∫–∞–ª—å) = {half_fov_v}¬∞")
    print(f"   –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞ –∫–∞–º–µ—Ä—ã:")
    print(f"      pitch_min = LAT_MIN + half_fov = {LAT_MIN} + {half_fov_v} = {pitch_min_safe:.1f}¬∞")
    print(f"      pitch_max = LAT_MAX - half_fov = {LAT_MAX} - {half_fov_v} = {pitch_max_safe:.1f}¬∞")
    print(f"   –°–≤–æ–±–æ–¥–∞ –¥–≤–∏–∂–µ–Ω–∏—è: {freedom:.1f}¬∞")

    if freedom < 0:
        print(f"   ‚ö†Ô∏è  –ü–†–û–ë–õ–ï–ú–ê: FOV —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π! –ù–µ—Ç —Å–≤–æ–±–æ–¥—ã –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏!")
    elif freedom < 10:
        print(f"   ‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –û—á–µ–Ω—å –º–∞–ª–æ —Å–≤–æ–±–æ–¥—ã –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è!")

print("\n" + "=" * 80)
print("–†–ê–°–ß–ï–¢ –ì–†–ê–ù–ò–¶ –î–õ–Ø YAW (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å)")
print("=" * 80)

for fov in [FOV_MIN, 50.0, 60.0, FOV_MAX]:
    half_fov_v = fov / 2.0
    horizontal_fov = fov * ASPECT_RATIO
    half_fov_h = horizontal_fov / 2.0

    # –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞ –∫–∞–º–µ—Ä—ã
    yaw_min_safe = LON_MIN + half_fov_h
    yaw_max_safe = LON_MAX - half_fov_h

    freedom_h = yaw_max_safe - yaw_min_safe

    print(f"\nFOV = {fov}¬∞:")
    print(f"   horizontal_fov = {fov}¬∞ √ó {ASPECT_RATIO:.2f} = {horizontal_fov:.1f}¬∞")
    print(f"   half_fov (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å) = {half_fov_h:.1f}¬∞")
    print(f"   –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞ –∫–∞–º–µ—Ä—ã:")
    print(f"      yaw_min = LON_MIN + half_fov_h = {LON_MIN} + {half_fov_h:.1f} = {yaw_min_safe:.1f}¬∞")
    print(f"      yaw_max = LON_MAX - half_fov_h = {LON_MAX} - {half_fov_h:.1f} = {yaw_max_safe:.1f}¬∞")
    print(f"   –°–≤–æ–±–æ–¥–∞ –¥–≤–∏–∂–µ–Ω–∏—è: {freedom_h:.1f}¬∞")

    if freedom_h < 0:
        print(f"   ‚ö†Ô∏è  –ü–†–û–ë–õ–ï–ú–ê: FOV —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π! –ù–µ—Ç —Å–≤–æ–±–æ–¥—ã –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏!")
    elif freedom_h < 20:
        print(f"   ‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –ú–∞–ª–æ —Å–≤–æ–±–æ–¥—ã –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è!")

print("\n" + "=" * 80)
print("–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø C++ –ö–û–î–ê")
print("=" * 80)

print(f"""
–í —Ñ–∞–π–ª–µ gstnvdsvirtualcam.cpp (—Å—Ç—Ä–æ–∫–∏ ~1302-1303) –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:

–¢–ï–ö–£–©–ò–ï –∑–Ω–∞—á–µ–Ω–∏—è (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ï):
   const gfloat EFFECTIVE_LAT_MIN_BASE = -30.0f;
   const gfloat EFFECTIVE_LAT_MAX_BASE = +40.0f;

–ü–†–ê–í–ò–õ–¨–ù–´–ï –∑–Ω–∞—á–µ–Ω–∏—è (—Ç–æ—á–Ω–æ –ø–æ –ø–∞–Ω–æ—Ä–∞–º–µ):
   const gfloat EFFECTIVE_LAT_MIN_BASE = {LAT_MIN}f;  // –¢–æ—á–Ω–∞—è –Ω–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –ø–∞–Ω–æ—Ä–∞–º—ã
   const gfloat EFFECTIVE_LAT_MAX_BASE = {LAT_MAX}f;  // –¢–æ—á–Ω–∞—è –≤–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –ø–∞–Ω–æ—Ä–∞–º—ã

–í —Ñ–∞–π–ª–µ gstnvdsvirtualcam.cpp (—Å—Ç—Ä–æ–∫–∏ ~1336-1337) –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
   const gfloat EFFECTIVE_LON_MIN = {LON_MIN}f;  // –õ–µ–≤—ã–π –∫—Ä–∞–π –ø–∞–Ω–æ—Ä–∞–º—ã
   const gfloat EFFECTIVE_LON_MAX = {LON_MAX}f;  // –ü—Ä–∞–≤—ã–π –∫—Ä–∞–π –ø–∞–Ω–æ—Ä–∞–º—ã

–õ–æ–≥–∏–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏ ~1326-1333 –∏ ~1346-1353) –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è:
   if (vcam->target_pitch + half_fov > EFFECTIVE_LAT_MAX) {{
       vcam->target_pitch = EFFECTIVE_LAT_MAX - half_fov;
   }}
   if (vcam->target_pitch - half_fov < EFFECTIVE_LAT_MIN) {{
       vcam->target_pitch = EFFECTIVE_LAT_MIN + half_fov;
   }}

–≠—Ç–∞ –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∫–∞–º–µ—Ä—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ FOV,
–Ω–µ –¥–æ–ø—É—Å–∫–∞—è –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –ø–∞–Ω–æ—Ä–∞–º—ã.
""")

print("\n" + "=" * 80)
print("–ò–¢–û–ì–û")
print("=" * 80)
print(f"""
‚úÖ –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü–∞—Ö LAT_MIN={LAT_MIN}¬∞ –∏ LAT_MAX={LAT_MAX}¬∞:
   - –ü—Ä–∏ FOV={FOV_MIN}¬∞ —Å–≤–æ–±–æ–¥–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏: {(LAT_MAX - LAT_MIN) - FOV_MIN:.1f}¬∞
   - –ü—Ä–∏ FOV={FOV_MAX}¬∞ —Å–≤–æ–±–æ–¥–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏: {(LAT_MAX - LAT_MIN) - FOV_MAX:.1f}¬∞

‚úÖ –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü–∞—Ö LON_MIN={LON_MIN}¬∞ –∏ LON_MAX={LON_MAX}¬∞:
   - –ü—Ä–∏ FOV={FOV_MIN}¬∞ —Å–≤–æ–±–æ–¥–∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏: {(LON_MAX - LON_MIN) - FOV_MIN * ASPECT_RATIO:.1f}¬∞
   - –ü—Ä–∏ FOV={FOV_MAX}¬∞ —Å–≤–æ–±–æ–¥–∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏: {(LON_MAX - LON_MIN) - FOV_MAX * ASPECT_RATIO:.1f}¬∞

üéØ –ö–∞–º–µ—Ä–∞ —Å–º–æ–∂–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è –ø–æ –≤—Å–µ–π –ø–∞–Ω–æ—Ä–∞–º–µ –ë–ï–ó —á–µ—Ä–Ω—ã—Ö –ø–æ–ª–æ—Å –ø—Ä–∏ –ª—é–±–æ–º FOV!
""")

print("=" * 80)

print("\n" + "=" * 80)
print("–í–´–ë–†–ê–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï: –í–ê–†–ò–ê–ù–¢ A")
print("=" * 80)

print("""
–í –∫–æ–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –†–ê–°–®–ò–†–ï–ù–ù–´–ï –≥—Ä–∞–Ω–∏—Ü—ã:

   EFFECTIVE_LAT_MIN_BASE = -40.0f;  // –†–∞—Å—à–∏—Ä–µ–Ω–æ –Ω–∞ 8¬∞ –≤–Ω–∏–∑
   EFFECTIVE_LAT_MAX_BASE = +30.0f;  // –†–∞—Å—à–∏—Ä–µ–Ω–æ –Ω–∞ 8¬∞ –≤–≤–µ—Ä—Ö
   EFFECTIVE_LON_MIN = -105.0f;      // –†–∞—Å—à–∏—Ä–µ–Ω–æ –Ω–∞ 15¬∞ –≤–ª–µ–≤–æ
   EFFECTIVE_LON_MAX = +105.0f;      // –†–∞—Å—à–∏—Ä–µ–Ω–æ –Ω–∞ 15¬∞ –≤–ø—Ä–∞–≤–æ

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
‚úÖ –°–≤–æ–±–æ–¥—É –¥–≤–∏–∂–µ–Ω–∏—è –ø—Ä–∏ FOV=68¬∞ (¬±2¬∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏, ¬±89¬∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏)
‚ö†Ô∏è  –í–æ–∑–º–æ–∂–Ω—ã —á–µ—Ä–Ω—ã–µ –ø–æ–ª–æ—Å—ã –ø–æ –∫—Ä–∞—è–º –ø—Ä–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö
üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FOV 50-60¬∞ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞

–°—Ç–∞—Ç—É—Å: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ gstnvdsvirtualcam.cpp
""")

print("=" * 80)
