# üß™ –¢–ï–°–¢ –í–ê–†–ò–ê–ù–¢–ê 4 - –£–º–Ω–æ–µ –æ—Ç–æ–¥–≤–∏–≥–∞–Ω–∏–µ –æ—Ç –∫—Ä–∞—è

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

**–í–∞—Ä–∏–∞–Ω—Ç 4** (—Å—Ç—Ä–æ–∫–∏ 1312-1321 –≤ gstnvdsvirtualcam.cpp):
```cpp
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Ö–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É - –µ—Å–ª–∏ –∫–∞–¥—Ä –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø–∞–Ω–æ—Ä–∞–º—É —Å–≤–µ—Ä—Ö—É:
if (vcam->target_pitch + half_fov > EFFECTIVE_LAT_MAX) {
    vcam->target_pitch = EFFECTIVE_LAT_MAX - half_fov;  // –û—Ç–æ–¥–≤–∏–≥–∞–µ–º –∫–∞–º–µ—Ä—É –≤–Ω–∏–∑
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∏–∂–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É - –µ—Å–ª–∏ –∫–∞–¥—Ä –≤—ã—Ö–æ–¥–∏—Ç –∑–∞ –ø–∞–Ω–æ—Ä–∞–º—É —Å–Ω–∏–∑—É:
if (vcam->target_pitch - half_fov < EFFECTIVE_LAT_MIN) {
    vcam->target_pitch = EFFECTIVE_LAT_MIN + half_fov;  // –û—Ç–æ–¥–≤–∏–≥–∞–µ–º –∫–∞–º–µ—Ä—É –≤–≤–µ—Ä—Ö
}
```

## üìã –ö–ê–ö –¢–ï–°–¢–ò–†–û–í–ê–¢–¨:

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –∫–∞–º–µ—Ä—É:
```bash
cd /home/nvidia/deep_cv_football/my_virt_cam
python3 test_virtual_camera_keyboard.py ../new_week/left.mp4 ../new_week/right.mp4
```

### 2. –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

#### üîº –¢–ï–°–¢ 1: –ú—è—á –¥–≤–∏–∂–µ—Ç—Å—è –í–í–ï–†–• (ball_y —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è, pitch —Ä–∞—Å—Ç—ë—Ç)
1. **–ù–∞–∂–∏–º–∞—Ç—å –∫–ª–∞–≤–∏—à—É W** –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - ball_y –¥–æ–ª–∂–µ–Ω —É–º–µ–Ω—å—à–∞—Ç—å—Å—è: 950 ‚Üí 850 ‚Üí 750 ‚Üí ... ‚Üí 100
   - pitch –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Ç–∏: -5.0¬∞ ‚Üí +5.0¬∞ ‚Üí +15.0¬∞ ‚Üí +19.2¬∞
   - –ö–æ–≥–¥–∞ pitch –ø—Ä–∏–±–ª–∏–∑–∏—Ç—Å—è –∫ +19.2¬∞ (–≤–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –æ—Ç ball_y):
     - FOV –º–æ–∂–µ—Ç –±—ã—Ç—å < 68¬∞ (–º—è—á –¥–∞–ª–µ–∫–æ ‚Üí –∑—É–º)
     - –í–∞—Ä–∏–∞–Ω—Ç 4 –¥–æ–ª–∂–µ–Ω **–æ—Ç–æ–¥–≤–∏–Ω—É—Ç—å –∫–∞–º–µ—Ä—É –≤–Ω–∏–∑**, —á—Ç–æ–±—ã –Ω–µ –≤—ã–π—Ç–∏ –∑–∞ EFFECTIVE_LAT_MAX=+30¬∞
     - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: `üõë BOUNDARY: pitch –æ–≥—Ä–∞–Ω–∏—á–µ–Ω`

#### üîΩ –¢–ï–°–¢ 2: –ú—è—á –¥–≤–∏–∂–µ—Ç—Å—è –í–ù–ò–ó (ball_y —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è, pitch –ø–∞–¥–∞–µ—Ç)
1. **–ù–∞–∂–∏–º–∞—Ç—å –∫–ª–∞–≤–∏—à—É S** –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - ball_y –¥–æ–ª–∂–µ–Ω —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è: 950 ‚Üí 1050 ‚Üí 1150 ‚Üí ... ‚Üí 1800
   - pitch –¥–æ–ª–∂–µ–Ω –ø–∞–¥–∞—Ç—å: -5.0¬∞ ‚Üí -15.0¬∞ ‚Üí -25.0¬∞ ‚Üí -29.2¬∞
   - –ö–æ–≥–¥–∞ pitch –ø—Ä–∏–±–ª–∏–∑–∏—Ç—Å—è –∫ -29.2¬∞ (–Ω–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –æ—Ç ball_y):
     - FOV –º–æ–∂–µ—Ç –±—ã—Ç—å < 68¬∞
     - –í–∞—Ä–∏–∞–Ω—Ç 4 –¥–æ–ª–∂–µ–Ω **–æ—Ç–æ–¥–≤–∏–Ω—É—Ç—å –∫–∞–º–µ—Ä—É –≤–≤–µ—Ä—Ö**, —á—Ç–æ–±—ã –Ω–µ –≤—ã–π—Ç–∏ –∑–∞ EFFECTIVE_LAT_MIN=-40¬∞
     - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ: `üõë BOUNDARY: pitch –æ–≥—Ä–∞–Ω–∏—á–µ–Ω`

#### üîé –¢–ï–°–¢ 3: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –º—è—á–∞ —É –∫—Ä–∞—è (ball_radius)
1. **–ù–∞–∂–∏–º–∞—Ç—å W** –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ ball_y –Ω–µ —Å—Ç–∞–Ω–µ—Ç ‚âà 100 (pitch ‚âà +19.2¬∞)
2. **–ù–∞–∂–∏–º–∞—Ç—å E** (—É–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –º—è—á–∞)
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - ball_radius —Ä–∞—Å—Ç—ë—Ç: 20px ‚Üí 30px ‚Üí 40px ‚Üí 50px
   - FOV —Ä–∞—Å—Ç—ë—Ç: 49.3¬∞ ‚Üí 56.2¬∞ ‚Üí 63.1¬∞ ‚Üí 68.0¬∞ (—Ñ–æ—Ä–º—É–ª–∞: 40 + (radius-5)*0.622)
   - half_fov —Ä–∞—Å—Ç—ë—Ç: 24.7¬∞ ‚Üí 28.1¬∞ ‚Üí 31.6¬∞ ‚Üí 34.0¬∞
   - **–í–∞—Ä–∏–∞–Ω—Ç 4 —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç**: pitch –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è, —á—Ç–æ–±—ã –Ω–µ –≤—ã–π—Ç–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É:
     - –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ: pitch = +19.2¬∞, FOV = 49.3¬∞, half_fov = 24.7¬∞
     - –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞: pitch + half_fov = 19.2 + 24.7 = 43.9¬∞ < 30¬∞ ‚úÖ OK
     - –ü–æ—Å–ª–µ —É–≤–µ–ª–∏—á–µ–Ω–∏—è: pitch = +19.2¬∞, FOV = 68.0¬∞, half_fov = 34.0¬∞
     - –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞: pitch + half_fov = 19.2 + 34.0 = 53.2¬∞ > 30¬∞ ‚ö†Ô∏è  –ü–†–û–ë–õ–ï–ú–ê!
     - **–í–∞—Ä–∏–∞–Ω—Ç 4**: pitch ‚Üí 30 - 34 = **-4¬∞** (–æ—Ç–æ–¥–≤–∏–Ω—É–ª–∏ –≤–Ω–∏–∑!)
   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: `üõë BOUNDARY: pitch –æ–≥—Ä–∞–Ω–∏—á–µ–Ω: 19.2¬∞‚Üí-4.0¬∞`

## üéØ –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ª–æ–≥–∞—Ö:

### –ù–æ—Ä–º–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (–Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π):
```
‚úÖ BOUNDARY: pitch=-5.0¬∞ OK (freedom: 20.7¬∞, range: -15.3¬∞ to 5.3¬∞)
```

### –í–∞—Ä–∏–∞–Ω—Ç 4 —Å—Ä–∞–±–æ—Ç–∞–ª (–∫–∞–º–µ—Ä–∞ –æ—Ç–æ–¥–≤–∏–Ω—É–ª–∞—Å—å):
```
üõë BOUNDARY: pitch –æ–≥—Ä–∞–Ω–∏—á–µ–Ω: 19.2¬∞‚Üí-4.0¬∞ (safe range: -15.3¬∞ to 5.3¬∞)
```

### FOV —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–µ—Å—Ç–∞):
```
‚ö†Ô∏è  BOUNDARY: FOV=68.0¬∞ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π! –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º: 19.2¬∞‚Üí-5.0¬∞
```

## üìä –¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- **EFFECTIVE_LAT_MIN** = -40.0¬∞ (–Ω–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –ø–∞–Ω–æ—Ä–∞–º—ã)
- **EFFECTIVE_LAT_MAX** = +30.0¬∞ (–≤–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –ø–∞–Ω–æ—Ä–∞–º—ã)
- **FOV_MIN** = 40.0¬∞ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑—É–º)
- **FOV_MAX** = 68.0¬∞ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∑—É–º)
- **ball_y –¥–∏–∞–ø–∞–∑–æ–Ω**: 100 (–≤–µ—Ä—Ö) ‚Üí 1800 (–Ω–∏–∑)
- **pitch –¥–∏–∞–ø–∞–∑–æ–Ω –æ—Ç ball_y**: +19.2¬∞ (ball_y=100) ‚Üí -29.2¬∞ (ball_y=1800)

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ —Ç–µ—Å—Ç–µ:

- **W** - –º—è—á –í–í–ï–†–• (ball_y —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è, pitch —Ä–∞—Å—Ç—ë—Ç)
- **S** - –º—è—á –í–ù–ò–ó (ball_y —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è, pitch –ø–∞–¥–∞–µ—Ç)
- **A** - –º—è—á –í–õ–ï–í–û (yaw —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è)
- **D** - –º—è—á –í–ü–†–ê–í–û (yaw —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è)
- **Q** - —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –º—è—á–∞ (FOV —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è ‚Üí –∑—É–º)
- **E** - —É–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –º—è—á–∞ (FOV —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è ‚Üí —à–∏—Ä–æ–∫–æ)
- **Z** - —É–º–µ–Ω—å—à–∏—Ç—å FOV –Ω–∞–ø—Ä—è–º—É—é (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–∑—É–º)
- **X** - —É–≤–µ–ª–∏—á–∏—Ç—å FOV –Ω–∞–ø—Ä—è–º—É—é (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–∑—É–º)
- **R** - –≤–µ—Ä–Ω—É—Ç—å –º—è—á –≤ —Ü–µ–Ω—Ç—Ä
- **ESC** - –≤—ã—Ö–æ–¥

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:

1. ‚úÖ –ö–∞–º–µ—Ä–∞ –º–æ–∂–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –º—è—á–æ–º –≤–æ –≤—Å—ë–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ ball_y (100 ‚Üí 1800)
2. ‚úÖ –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫—Ä–∞—è –ø–∞–Ω–æ—Ä–∞–º—ã –í–∞—Ä–∏–∞–Ω—Ç 4 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–¥–≤–∏–≥–∞–µ—Ç –∫–∞–º–µ—Ä—É
3. ‚úÖ –ü—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ FOV —É –∫—Ä–∞—è –∫–∞–º–µ—Ä–∞ –æ—Ç–æ–¥–≤–∏–≥–∞–µ—Ç—Å—è, —á—Ç–æ–±—ã –Ω–µ –≤—ã–π—Ç–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—É
4. ‚úÖ –ù–µ—Ç —á—ë—Ä–Ω—ã—Ö –ø–æ–ª–æ—Å –≤ –≤–∏–¥–µ–æ
5. ‚úÖ –ú—è—á –≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ–Ω –≤ –∫–∞–¥—Ä–µ (–Ω–µ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è)
