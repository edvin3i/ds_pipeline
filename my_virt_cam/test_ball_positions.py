#!/usr/bin/env python3
"""
–ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –º—è—á–∞ –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–º–µ—Ä—ã
"""

PANORAMA_HEIGHT = 1900

# –¢–µ–∫—É—â–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –ø–∞–Ω–æ—Ä–∞–º—ã
LAT_MIN_CONFIG = -39.0  # –ù–∏–∑
LAT_MAX_CONFIG = +29.0  # –í–µ—Ä—Ö

# –§–æ—Ä–º—É–ª–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (–∫–∞–∫ –≤ C++)
def calc_pitch(ball_y):
    """–í—ã—á–∏—Å–ª—è–µ—Ç pitch –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–≥–æ ball_y"""
    LAT_MIN_func = LAT_MAX_CONFIG  # +29¬∞ (–≤–µ—Ä—Ö)
    LAT_MAX_func = LAT_MIN_CONFIG  # -39¬∞ (–Ω–∏–∑)

    pitch = LAT_MIN_func - (ball_y / (PANORAMA_HEIGHT - 1)) * (LAT_MIN_func - LAT_MAX_func)
    return pitch

print("=" * 70)
print("üéØ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ü–û–ó–ò–¶–ò–ô –ú–Ø–ß–ê –î–õ–Ø –¶–ï–ù–¢–†–ò–†–û–í–ê–ù–ò–Ø –ö–ê–ú–ï–†–´")
print("=" * 70)
print()
print(f"–ì—Ä–∞–Ω–∏—Ü—ã –ø–∞–Ω–æ—Ä–∞–º—ã: LAT_MIN={LAT_MIN_CONFIG}¬∞, LAT_MAX={LAT_MAX_CONFIG}¬∞")
print(f"–í—ã—Å–æ—Ç–∞ –ø–∞–Ω–æ—Ä–∞–º—ã: {LAT_MAX_CONFIG - LAT_MIN_CONFIG}¬∞")
print(f"–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä: {(LAT_MIN_CONFIG + LAT_MAX_CONFIG) / 2}¬∞")
print()
print("=" * 70)
print(f"{'ball_y (px)':<15} {'% –≤—ã—Å–æ—Ç—ã':<15} {'pitch (¬∞)':<15} {'–û–ø–∏—Å–∞–Ω–∏–µ'}")
print("=" * 70)

test_positions = [
    (0,                          0.00,  "–í–µ—Ä—Ö –ø–∞–Ω–æ—Ä–∞–º—ã"),
    (190,                        0.10,  "10% –æ—Ç –≤–µ—Ä—Ö–∞"),
    (380,                        0.20,  "20% –æ—Ç –≤–µ—Ä—Ö–∞"),
    (475,                        0.25,  "–í–µ—Ä—Ö–Ω—è—è —á–µ—Ç–≤–µ—Ä—Ç—å"),
    (665,                        0.35,  "35% –æ—Ç –≤–µ—Ä—Ö–∞"),
    (760,                        0.40,  "–ß—É—Ç—å –≤—ã—à–µ —Å–µ—Ä–µ–¥–∏–Ω—ã"),
    (950,                        0.50,  "–°–ï–†–ï–î–ò–ù–ê –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"),
    (1140,                       0.60,  "–ß—É—Ç—å –Ω–∏–∂–µ —Å–µ—Ä–µ–¥–∏–Ω—ã"),
    (1235,                       0.65,  "65% –æ—Ç –≤–µ—Ä—Ö–∞"),
    (1425,                       0.75,  "–ù–∏–∂–Ω—è—è —á–µ—Ç–≤–µ—Ä—Ç—å"),
    (1520,                       0.80,  "80% –æ—Ç –≤–µ—Ä—Ö–∞"),
    (1710,                       0.90,  "90% –æ—Ç –≤–µ—Ä—Ö–∞"),
    (1900,                       1.00,  "–ù–∏–∑ –ø–∞–Ω–æ—Ä–∞–º—ã"),
]

for y, fraction, desc in test_positions:
    pitch = calc_pitch(y)
    print(f"{y:<15} {fraction:<15.2f} {pitch:<15.1f} {desc}")

print("=" * 70)
print()
print("üîç –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –¢–û–ß–ö–ò:")
print("=" * 70)

# –ù–∞–π–¥—ë–º y –¥–ª—è pitch=0¬∞ (–≥–æ—Ä–∏–∑–æ–Ω—Ç)
# pitch = +29¬∞ - (y / 1899) * 68¬∞
# 0 = 29 - (y / 1899) * 68
# y / 1899 = 29 / 68
# y = 1899 * 29 / 68
y_horizon = 1899 * LAT_MAX_CONFIG / (LAT_MAX_CONFIG - LAT_MIN_CONFIG)
print(f"–ì–æ—Ä–∏–∑–æ–Ω—Ç (pitch=0¬∞):           y = {y_horizon:.1f}px  ({y_horizon/PANORAMA_HEIGHT:.2%})")

# –ù–∞–π–¥—ë–º y –¥–ª—è pitch=-5¬∞ (—Ç–µ–∫—É—â–∏–π —Ü–µ–Ω—Ç—Ä)
# -5 = 29 - (y / 1899) * 68
# y / 1899 = 34 / 68
# y = 1899 * 34 / 68
y_center_current = 1899 * (LAT_MAX_CONFIG - (-5)) / (LAT_MAX_CONFIG - LAT_MIN_CONFIG)
print(f"–¢–µ–∫—É—â–∏–π —Ü–µ–Ω—Ç—Ä (pitch=-5¬∞):     y = {y_center_current:.1f}px  ({y_center_current/PANORAMA_HEIGHT:.2%})")

# –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–µ—Ä–µ–¥–∏–Ω–∞
y_middle = PANORAMA_HEIGHT / 2
pitch_middle = calc_pitch(y_middle)
print(f"–°–µ—Ä–µ–¥–∏–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (y=950):  pitch = {pitch_middle:.1f}¬∞")

print("=" * 70)
print()
print("üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:")
print("=" * 70)
print()
print("–ï—Å–ª–∏ –∫–∞–º–µ—Ä–∞ –ü–†–ò–ñ–ê–¢–ê –ö –ù–ò–ó–£ –ø—Ä–∏ ball_y=950px (pitch=-5¬∞):")
print("  ‚Üí –≠—Ç–æ –∑–Ω–∞—á–∏—Ç —á—Ç–æ –í–ò–ó–£–ê–õ–¨–ù–´–ô —Ü–µ–Ω—Ç—Ä –ø–∞–Ω–æ—Ä–∞–º—ã –í–´–®–ï —á–µ–º -5¬∞!")
print()
print("–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ball_y:")
print()
print("1. ball_y = 665px  (35%) ‚Üí pitch = +3.0¬∞  (–≤—ã—à–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞)")
print("   –í Python: self.ball_y = PANORAMA_HEIGHT * 0.35")
print()
print("2. ball_y = 760px  (40%) ‚Üí pitch = +1.0¬∞  (—á—É—Ç—å –≤—ã—à–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞)")
print("   –í Python: self.ball_y = PANORAMA_HEIGHT * 0.40")
print()
print("3. ball_y = 809px  (42.6%) ‚Üí pitch = 0.0¬∞  (–ì–û–†–ò–ó–û–ù–¢)")
print(f"   –í Python: self.ball_y = {y_horizon:.1f}")
print()
print("4. ball_y = 950px  (50%) ‚Üí pitch = -5.0¬∞  (–Ω–∏–∂–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞)")
print("   –í Python: self.ball_y = PANORAMA_HEIGHT * 0.50  ‚Üê –¢–ï–ö–£–©–ï–ï")
print()
print("=" * 70)
print()
print("üéØ –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì:")
print()
print("–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç —Å ball_y –Ω–∞ –ì–û–†–ò–ó–û–ù–¢–ï (pitch=0¬∞):")
print()
print(f"   self.ball_y = {y_horizon:.1f}  # –ì–æ—Ä–∏–∑–æ–Ω—Ç")
print()
print("–ò–ª–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–∫–∞ –Ω–µ –Ω–∞–π–¥—ë—Ç–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ü–µ–Ω—Ç—Ä!")
print("=" * 70)
