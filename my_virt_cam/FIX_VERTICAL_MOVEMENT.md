# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è (W/S)

## –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ W/S (–¥–≤–∏–∂–µ–Ω–∏–µ –º—è—á–∞ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑) –∫–∞–º–µ—Ä–∞ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏.

## –ü—Ä–∏—á–∏–Ω–∞

### –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≥—Ä–∞–Ω–∏—Ü –ø–∞–Ω–æ—Ä–∞–º—ã!

–í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å **—Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** –≥—Ä–∞–Ω–∏—Ü –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö:

**1. –í –∫–æ–Ω—Ñ–∏–≥–µ** (`nvdsvirtualcam_config.h`):
```cpp
LAT_MIN = -32.0f  // –ù–∏–∑ –ø–∞–Ω–æ—Ä–∞–º—ã
LAT_MAX = +22.0f  // –í–µ—Ä—Ö –ø–∞–Ω–æ—Ä–∞–º—ã
```

**2. –í —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç** (`pano_xy_to_yaw_pitch`):
```cpp
LAT_MIN = 30.0f   // –í–ï–†–• –ø–∞–Ω–æ—Ä–∞–º—ã (—Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!)
LAT_MAX = -20.0f  // –ù–ò–ó –ø–∞–Ω–æ—Ä–∞–º—ã (—Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!)
```

**3. –í —Ñ—É–Ω–∫—Ü–∏–∏ –≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è** (`apply_edge_safe_limits`):
```cpp
LAT_MIN = -32.0f  // –ò–∑ –∫–æ–Ω—Ñ–∏–≥–∞
LAT_MAX = +22.0f  // –ò–∑ –∫–æ–Ω—Ñ–∏–≥–∞
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:

1. **–ú—è—á –¥–≤–∏–≥–∞–µ—Ç—Å—è** –ø–æ Y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º (Python —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç `ball_y`)
2. **–§—É–Ω–∫—Ü–∏—è `pano_xy_to_yaw_pitch`** –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `ball_y` ‚Üí `target_pitch`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã (30¬∞ –¥–æ -20¬∞)
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª–∞ **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π** `target_pitch`
3. **–§—É–Ω–∫—Ü–∏—è `apply_edge_safe_limits`** –æ–±—Ä–µ–∑–∞–ª–∞ `target_pitch`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –Ω–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã (-32¬∞ –¥–æ +22¬∞)
   - –û–±—Ä–µ–∑–∞–ª–∞ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –≥—Ä–∞–Ω–∏—Ü!
4. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** Pitch "–∑–∞—Å—Ç—Ä–µ–≤–∞–ª" –∏–∑-–∑–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≥—Ä–∞–Ω–∏—Ü

---

## –†–µ—à–µ–Ω–∏–µ

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Å—Ç—Ä–æ–∫–∞—Ö 120-123 —Ñ–∞–π–ª–∞ `src/gstnvdsvirtualcam.cpp`:

### –ë—ã–ª–æ ‚ùå:
```cpp
const gfloat LON_MIN = -90.0f;
const gfloat LON_MAX = +90.0f;
const gfloat LAT_MIN = 30.0f;   // –í–ï–†–• –ø–∞–Ω–æ—Ä–∞–º—ã!!!
const gfloat LAT_MAX = -20.0f;  // –ù–ò–ó –ø–∞–Ω–æ—Ä–∞–º—ã!!!
```

### –°—Ç–∞–ª–æ ‚úÖ:
```cpp
// –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏
const gfloat LON_MIN = NvdsVirtualCamConfig::LON_MIN;  // -90¬∞
const gfloat LON_MAX = NvdsVirtualCamConfig::LON_MAX;  // +90¬∞
const gfloat LAT_MIN = NvdsVirtualCamConfig::LAT_MAX;  // +22¬∞ (–í–ï–†–• –ø–∞–Ω–æ—Ä–∞–º—ã)
const gfloat LAT_MAX = NvdsVirtualCamConfig::LAT_MIN;  // -32¬∞ (–ù–ò–ó –ø–∞–Ω–æ—Ä–∞–º—ã)
```

**–í–∞–∂–Ω–æ:** –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –∏–Ω–≤–µ—Ä—Å–∏—é:
- `LAT_MIN` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ = `LAT_MAX` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (–≤–µ—Ä—Ö –ø–∞–Ω–æ—Ä–∞–º—ã = +22¬∞)
- `LAT_MAX` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ = `LAT_MIN` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (–Ω–∏–∑ –ø–∞–Ω–æ—Ä–∞–º—ã = -32¬∞)

–≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º —á—Ç–æ:
- –í –∫–æ–Ω—Ñ–∏–≥–µ: LAT —Ä–∞—Å—Ç—ë—Ç –≤–≤–µ—Ä—Ö (-32¬∞ –Ω–∏–∑, +22¬∞ –≤–µ—Ä—Ö)
- –í —Ñ—É–Ω–∫—Ü–∏–∏: Y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ä–∞—Å—Ç—ë—Ç –≤–Ω–∏–∑ (y=0 –≤–µ—Ä—Ö, y=1900 –Ω–∏–∑)

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
W/S –∫–ª–∞–≤–∏—à–∏ ‚Üí ball_y –º–µ–Ω—è–µ—Ç—Å—è
‚Üí pano_xy_to_yaw_pitch (—Å—Ç–∞—Ä—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã 30¬∞ –¥–æ -20¬∞)
‚Üí target_pitch —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚Üí apply_edge_safe_limits (–Ω–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã -32¬∞ –¥–æ +22¬∞)
‚Üí target_pitch –æ–±—Ä–µ–∑–∞–Ω –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚Üí –ö–∞–º–µ—Ä–∞ –ù–ï –¥–≤–∏–≥–∞–µ—Ç—Å—è ‚ùå
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
W/S –∫–ª–∞–≤–∏—à–∏ ‚Üí ball_y –º–µ–Ω—è–µ—Ç—Å—è
‚Üí pano_xy_to_yaw_pitch (–≥—Ä–∞–Ω–∏—Ü—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞: +22¬∞ –¥–æ -32¬∞)
‚Üí target_pitch —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚Üí apply_edge_safe_limits (—Ç–µ –∂–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
‚Üí target_pitch –≤ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö
‚Üí –ö–∞–º–µ—Ä–∞ –¥–≤–∏–≥–∞–µ—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ ‚úÖ
```

---

## –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

### –§–æ—Ä–º—É–ª–∞ –≤ `pano_xy_to_yaw_pitch`:

```cpp
// Y ‚Üí pitch (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —É–≥–æ–ª)
*out_pitch = LAT_MIN - (y / (pano_h - 1)) * (LAT_MIN - LAT_MAX);
```

### –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):

**–ü—Ä–∏ y = 0 (–≤–µ—Ä—Ö –ø–∞–Ω–æ—Ä–∞–º—ã):**
```
pitch = LAT_MIN - (0 / 1899) √ó (LAT_MIN - LAT_MAX)
      = +22¬∞ - 0 √ó (+22¬∞ - (-32¬∞))
      = +22¬∞ - 0
      = +22¬∞  ‚úÖ (–≤–µ—Ä—Ö –ø–∞–Ω–æ—Ä–∞–º—ã)
```

**–ü—Ä–∏ y = 950 (—Ü–µ–Ω—Ç—Ä –ø–∞–Ω–æ—Ä–∞–º—ã):**
```
pitch = +22¬∞ - (950 / 1899) √ó (+22¬∞ - (-32¬∞))
      = +22¬∞ - 0.5 √ó 54¬∞
      = +22¬∞ - 27¬∞
      = -5¬∞  ‚úÖ (—Ü–µ–Ω—Ç—Ä –ø–∞–Ω–æ—Ä–∞–º—ã)
```

**–ü—Ä–∏ y = 1899 (–Ω–∏–∑ –ø–∞–Ω–æ—Ä–∞–º—ã):**
```
pitch = +22¬∞ - (1899 / 1899) √ó (+22¬∞ - (-32¬∞))
      = +22¬∞ - 1 √ó 54¬∞
      = +22¬∞ - 54¬∞
      = -32¬∞  ‚úÖ (–Ω–∏–∑ –ø–∞–Ω–æ—Ä–∞–º—ã)
```

–í—Å—ë —Å—Ö–æ–¥–∏—Ç—Å—è! üéØ

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:
```bash
cd /home/nvidia/deep_cv_football/my_virt_cam
python3 test_virtual_camera_keyboard.py ../new_week/left.mp4 ../new_week/right.mp4
```

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–ù–∞–∂–º–∏—Ç–µ W (–≤–≤–µ—Ä—Ö)**
   - `ball_y` —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è (–¥–≤–∏–∂–µ–Ω–∏–µ –∫ –≤–µ—Ä—Ö—É –ø–∞–Ω–æ—Ä–∞–º—ã)
   - –ö–∞–º–µ—Ä–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞–∫–ª–æ–Ω—è—Ç—å—Å—è –≤–≤–µ—Ä—Ö (pitch —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∫ +22¬∞)
   - –í–∏–¥–µ–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä—Ö–Ω—é—é —á–∞—Å—Ç—å –ø–æ–ª—è

2. **–ù–∞–∂–º–∏—Ç–µ S (–≤–Ω–∏–∑)**
   - `ball_y` —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è (–¥–≤–∏–∂–µ–Ω–∏–µ –∫ –Ω–∏–∑—É –ø–∞–Ω–æ—Ä–∞–º—ã)
   - –ö–∞–º–µ—Ä–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞–∫–ª–æ–Ω—è—Ç—å—Å—è –≤–Ω–∏–∑ (pitch —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –∫ -32¬∞)
   - –í–∏–¥–µ–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∏–∂–Ω—é—é —á–∞—Å—Ç—å –ø–æ–ª—è

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä–∞–Ω–∏—Ü—ã**
   - –ü—Ä–∏ –±–æ–ª—å—à–æ–º FOV (60-70¬∞) –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ pitch –±—É–¥–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ
   - –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –≥—Ä–∞–Ω–∏—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç!
   - –õ–æ–≥–∏ –ø–æ–∫–∞–∂—É—Ç: `pitch[min, max]` –¥–∏–∞–ø–∞–∑–æ–Ω

### –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏ (—Å GST_DEBUG=nvdsvirtualcam:3):

```
INFO: FOV=50.0¬∞ ‚Üí Boundaries: yaw[-44.5, 44.5], pitch[-11.5, 1.5]
INFO: FOV=60.0¬∞ ‚Üí Boundaries: yaw[-36.2, 36.2], pitch[-6.0, -4.0]
INFO: FOV=70.0¬∞ ‚Üí Boundaries: yaw[-27.3, 27.3], pitch[-6.0, -4.0]
```

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ (W/S) —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!**

–ü—Ä–∏ –º–∞–ª–æ–º FOV (40-50¬∞) - –ø–æ–ª–Ω–∞—è —Å–≤–æ–±–æ–¥–∞ –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ pitch
–ü—Ä–∏ –±–æ–ª—å—à–æ–º FOV (60-70¬∞) - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ø–æ pitch (–∏–∑-–∑–∞ –≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è)

–≠—Ç–æ **–æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** —Å–æ–≥–ª–∞—Å–Ω–æ –ª–æ–≥–∏–∫–µ –≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è!

---

## –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
cd /home/nvidia/deep_cv_football/my_virt_cam/src
make
```

‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: 2025-11-01
