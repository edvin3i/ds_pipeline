# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–º–µ—Ä—ã

## –ü—Ä–æ–±–ª–µ–º–∞

–ö–∞–º–µ—Ä–∞ –±—ã–ª–∞ "–ø—Ä–∏–∂–∞—Ç–∞ –∫ –Ω–∏–∑—É" –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –Ω–µ –º–æ–≥–ª–∞ –ø–æ–¥–Ω—è—Ç—å—Å—è. –ü—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:
- –ü—Ä–∏ `ball_y=1800` (–Ω–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) –∫–∞–º–µ—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ `pitch=+19.2¬∞` (—Å–º–æ—Ç—Ä–∏—Ç –í–í–ï–†–•) ‚ùå
- –û–∂–∏–¥–∞–ª–æ—Å—å: –∫–∞–º–µ—Ä–∞ –¥–æ–ª–∂–Ω–∞ —Å–º–æ—Ç—Ä–µ—Ç—å –í–ù–ò–ó (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π pitch) ‚úÖ

## –ü—Ä–∏—á–∏–Ω–∞

–í —Ñ—É–Ω–∫—Ü–∏–∏ `pano_xy_to_yaw_pitch` (—Ñ–∞–π–ª `gstnvdsvirtualcam.cpp`, —Å—Ç—Ä–æ–∫–∞ 131) —Ñ–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ pitch –±—ã–ª–∞ **–ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞**:

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
```cpp
*out_pitch = LAT_MIN - (y / (gfloat)(pano_h - 1)) * (LAT_MIN - LAT_MAX);
```

–≠—Ç–∞ —Ñ–æ—Ä–º—É–ª–∞ –¥–∞–≤–∞–ª–∞:
- –ü—Ä–∏ `y=0` (–≤–µ—Ä—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è): `pitch = -32¬∞ - 0 * (-54¬∞) = -32¬∞` ‚ùå (—Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–æ)
- –ü—Ä–∏ `y=1900` (–Ω–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è): `pitch = -32¬∞ - 1 * (-54¬∞) = +22¬∞` ‚ùå (—Å–º–æ—Ç—Ä–∏—Ç –≤–≤–µ—Ä—Ö!)
- –ü—Ä–∏ `y=950` (—Ü–µ–Ω—Ç—Ä): `pitch = -32¬∞ - 0.5 * (-54¬∞) = +5¬∞` ‚ùå (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ü–†–ê–í–ò–õ–¨–ù–û):
```cpp
gfloat norm_y = y / (pano_h - 1);
*out_pitch = LAT_MAX - norm_y * (LAT_MAX - LAT_MIN);
```

–ù–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞ –¥–∞–µ—Ç:
- –ü—Ä–∏ `y=0` (–≤–µ—Ä—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è): `pitch = 22¬∞ - 0 * 54¬∞ = +22¬∞` ‚úÖ (—Å–º–æ—Ç—Ä–∏—Ç –≤–≤–µ—Ä—Ö)
- –ü—Ä–∏ `y=1900` (–Ω–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è): `pitch = 22¬∞ - 1 * 54¬∞ = -32¬∞` ‚úÖ (—Å–º–æ—Ç—Ä–∏—Ç –≤–Ω–∏–∑)
- –ü—Ä–∏ `y=950` (—Ü–µ–Ω—Ç—Ä): `pitch = 22¬∞ - 0.5 * 54¬∞ = -5¬∞` ‚úÖ (—Ü–µ–Ω—Ç—Ä –ø–∞–Ω–æ—Ä–∞–º—ã)
- –ü—Ä–∏ `y=1800` (–ø–æ—á—Ç–∏ –Ω–∏–∑): `pitch = 22¬∞ - 0.948 * 54¬∞ = -29.2¬∞` ‚úÖ (—Å–º–æ—Ç—Ä–∏—Ç –≤–Ω–∏–∑)

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω DEFAULT_PITCH
**–§–∞–π–ª:** `nvdsvirtualcam_config.h`, —Å—Ç—Ä–æ–∫–∞ 29

```cpp
// –ë—ã–ª–æ:
constexpr float DEFAULT_PITCH = 15.0f;

// –°—Ç–∞–ª–æ:
constexpr float DEFAULT_PITCH = -5.0f;  // –¶–µ–Ω—Ç—Ä –ø–∞–Ω–æ—Ä–∞–º—ã: (-32+22)/2 = -5¬∞
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å LAT_MIN/LAT_MAX
**–§–∞–π–ª:** `gstnvdsvirtualcam.cpp`, —Å—Ç—Ä–æ–∫–∏ 121-122

```cpp
// –ë—ã–ª–æ:
const gfloat LAT_MIN = NvdsVirtualCamConfig::LAT_MAX;  // ‚ùå –ü–µ—Ä–µ–ø—É—Ç–∞–Ω–æ!
const gfloat LAT_MAX = NvdsVirtualCamConfig::LAT_MIN;  // ‚ùå –ü–µ—Ä–µ–ø—É—Ç–∞–Ω–æ!

// –°—Ç–∞–ª–æ:
const gfloat LAT_MIN = NvdsVirtualCamConfig::LAT_MIN;  // ‚úÖ -32¬∞ (–ù–ò–ó –ø–∞–Ω–æ—Ä–∞–º—ã)
const gfloat LAT_MAX = NvdsVirtualCamConfig::LAT_MAX;  // ‚úÖ +22¬∞ (–í–ï–†–• –ø–∞–Ω–æ—Ä–∞–º—ã)
```

### 3. –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫–ª–∞–≤–∏—à–∏ W/S
**–§–∞–π–ª:** `test_virtual_camera_keyboard.py`, —Å—Ç—Ä–æ–∫–∏ 200-205

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—É–ª—ã pitch –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:

```python
# –ë—ã–ª–æ:
if key == 'w': self.move_ball(0, -1, shift_pressed)  # –í–≤–µ—Ä—Ö
elif key == 's': self.move_ball(0, 1, shift_pressed)  # –í–Ω–∏–∑

# –°—Ç–∞–ª–æ:
if key == 'w': self.move_ball(0, 1, shift_pressed)   # –í–≤–µ—Ä—Ö (—É–≤–µ–ª–∏—á–∏–≤–∞–µ–º Y)
elif key == 's': self.move_ball(0, -1, shift_pressed) # –í–Ω–∏–∑ (—É–º–µ–Ω—å—à–∞–µ–º Y)
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –ø–ª–∞–≥–∏–Ω–∞ (`./rebuild.sh`):

```bash
cd /home/nvidia/deep_cv_football/my_virt_cam
python3 test_virtual_camera_keyboard.py ../new_week/left.mp4 ../new_week/right.mp4
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```
üîç XY‚ÜíANGLE: ball_y=950 ‚Üí pitch=-5.0¬∞ ‚úÖ (—Ü–µ–Ω—Ç—Ä –ø–∞–Ω–æ—Ä–∞–º—ã)
üìä CAMERA: pitch=-5.0¬∞ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞)
```

### –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

| ball_y | –ü–æ–∑–∏—Ü–∏—è –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ | –°—Ç–∞—Ä–∞—è —Ñ–æ—Ä–º—É–ª–∞ | –ù–æ–≤–∞—è —Ñ–æ—Ä–º—É–ª–∞ | –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å |
|--------|----------------------|----------------|---------------|--------------|
| 0      | –í–µ—Ä—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è      | -32.0¬∞         | +22.0¬∞        | ‚úÖ –°–º–æ—Ç—Ä–∏—Ç –≤–≤–µ—Ä—Ö |
| 950    | –¶–µ–Ω—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è     | +5.0¬∞          | -5.0¬∞         | ‚úÖ –¶–µ–Ω—Ç—Ä –ø–∞–Ω–æ—Ä–∞–º—ã |
| 1800   | –ü–æ—á—Ç–∏ –Ω–∏–∑            | +19.2¬∞         | -29.2¬∞        | ‚úÖ –°–º–æ—Ç—Ä–∏—Ç –≤–Ω–∏–∑ |
| 1900   | –ù–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è      | +22.0¬∞         | -32.0¬∞        | ‚úÖ –ú–∞–∫—Å–∏–º—É–º –≤–Ω–∏–∑ |

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ pitch —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ö–∞–º–µ—Ä–∞ —Å—Ç–∞—Ä—Ç—É–µ—Ç –≤ —Ü–µ–Ω—Ç—Ä–µ –ø–∞–Ω–æ—Ä–∞–º—ã (pitch=-5¬∞)
- –ü—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –º—è—á–∞ –≤–≤–µ—Ä—Ö –∫–∞–º–µ—Ä–∞ —Å–º–æ—Ç—Ä–∏—Ç –≤–≤–µ—Ä—Ö (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π pitch)
- –ü—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –º—è—á–∞ –≤–Ω–∏–∑ –∫–∞–º–µ—Ä–∞ —Å–º–æ—Ç—Ä–∏—Ç –≤–Ω–∏–∑ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π pitch)
- –ö–ª–∞–≤–∏—à–∏ W/S —Ä–∞–±–æ—Ç–∞—é—Ç –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ

‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
- –ü–ª–∞–≥–∏–Ω –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω: `15:08 Nov 4`
- –¢–µ—Å—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è pitch
- –ö–∞–º–µ—Ä–∞ –±–æ–ª—å—à–µ –Ω–µ "–ø—Ä–∏–∂–∞—Ç–∞ –∫ –Ω–∏–∑—É"

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. [gstnvdsvirtualcam.cpp:121-122](my_virt_cam/src/gstnvdsvirtualcam.cpp#L121-L122) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å LAT_MIN/LAT_MAX
2. [gstnvdsvirtualcam.cpp:128-131](my_virt_cam/src/gstnvdsvirtualcam.cpp#L128-L131) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ pitch
3. [nvdsvirtualcam_config.h:29](my_virt_cam/src/nvdsvirtualcam_config.h#L29) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω DEFAULT_PITCH
4. [test_virtual_camera_keyboard.py:200-205](my_virt_cam/test_virtual_camera_keyboard.py#L200-L205) - –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã W/S –∫–ª–∞–≤–∏—à–∏

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-11-04
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
