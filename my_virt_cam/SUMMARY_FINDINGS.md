# –ò—Ç–æ–≥–æ–≤—ã–µ –Ω–∞—Ö–æ–¥–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –°—Ç–∞—Ä—Ç–æ–≤—ã–π FOV –±—ã–ª –Ω–µ 70¬∞, –∞ 44.2¬∞

**–ü—Ä–∏—á–∏–Ω–∞:**
- FOV —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ `ball_radius`
- –°—Ç–∞—Ä—Ç–æ–≤—ã–π `ball_radius = 20px` ‚Üí FOV = 44.2¬∞
- –ü–∞—Ä–∞–º–µ—Ç—Ä `fov=70` –≤ pipeline **–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è** –ø—Ä–∏ `auto-follow=true`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```python
# –ë—ã–ª–æ:
self.ball_radius = 20.0

# –°—Ç–∞–ª–æ:
self.ball_radius = 60.0  # ‚Üí FOV = 70¬∞
```

---

### 2. –ö–∞–º–µ—Ä–∞ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–Ω—è—Ç—å—Å—è –≤—ã—à–µ —Å–µ—Ä–µ–¥–∏–Ω—ã –¥–∞–∂–µ –ø—Ä–∏ –º–∞–ª–æ–º FOV

**–ü—Ä–∏—á–∏–Ω–∞:**
–ü–∞–Ω–æ—Ä–∞–º–∞ **–∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞**:
- –ù–∏–∑: -32¬∞ (32¬∞ –≤–Ω–∏–∑ –æ—Ç –Ω—É–ª—è)
- –í–µ—Ä—Ö: +22¬∞ (22¬∞ –≤–≤–µ—Ä—Ö –æ—Ç –Ω—É–ª—è)
- –ü–∞–Ω–æ—Ä–∞–º–∞ —Å–º–µ—â–µ–Ω–∞ –≤–Ω–∏–∑!

**–§–æ—Ä–º—É–ª–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
```
pitch_max = LAT_MAX - half_fov_v - MARGIN
pitch_max = +22¬∞ - half_fov_v - 0.5¬∞
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö FOV:**

| FOV   | pitch_max | –ú–æ–∂–µ—Ç –ø–æ–¥–Ω—è—Ç—å—Å—è?           |
|-------|-----------|----------------------------|
| 30¬∞   | +6.5¬∞     | ‚úÖ –î–∞, –≤—ã—Å–æ–∫–æ             |
| 40¬∞   | +1.5¬∞     | ‚úÖ –î–∞, —á—É—Ç—å –≤—ã—à–µ 0¬∞       |
| 43¬∞   | 0.0¬∞      | ‚ö†Ô∏è –ù–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–µ           |
| 44.2¬∞ | -0.6¬∞     | ‚ùå –ù–∏–∂–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞         |
| 50¬∞   | -3.5¬∞     | ‚ùå –ù–∏–∂–µ —Å–µ—Ä–µ–¥–∏–Ω—ã          |
| 70¬∞   | -13.5¬∞    | ‚ùå –î–∞–ª–µ–∫–æ –≤–Ω–∏–∑—É           |

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ç–æ—á–∫–∞: FOV = 43¬∞**
–ü—Ä–∏ FOV > 43¬∞ –∫–∞–º–µ—Ä–∞ –ù–ï –ú–û–ñ–ï–¢ –ø–æ–¥–Ω—è—Ç—å—Å—è –≤—ã—à–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞ (0¬∞)!

---

### 3. –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≥—Ä–∞–Ω–∏—Ü –≤ pano_xy_to_yaw_pitch

**–ë—ã–ª–æ:**
```cpp
const gfloat LAT_MIN = 30.0f;   // –°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
const gfloat LAT_MAX = -20.0f;  // –°—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```cpp
const gfloat LAT_MIN = NvdsVirtualCamConfig::LAT_MAX;  // +22¬∞
const gfloat LAT_MAX = NvdsVirtualCamConfig::LAT_MIN;  // -32¬∞
```

–¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞!

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –°—Ç–∞—Ä—Ç–æ–≤—ã–π ball_radius = 60px
- **–§–∞–π–ª:** `test_virtual_camera_keyboard.py:38`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç–∞—Ä—Ç–æ–≤—ã–π FOV —Ç–µ–ø–µ—Ä—å 70¬∞ (—à–∏—Ä–æ–∫–∏–π –æ–±–∑–æ—Ä)

### 2. –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã
- **–§–∞–π–ª:** `src/gstnvdsvirtualcam.cpp:120-123`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

### 3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- **–§–∞–π–ª:** `src/gstnvdsvirtualcam.cpp:190-245`
- **–§—É–Ω–∫—Ü–∏—è:** `apply_edge_safe_limits()`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì—Ä–∞–Ω–∏—Ü—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ FOV

### 4. –£–±—Ä–∞–Ω–∞ –∂—ë—Å—Ç–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ pitch
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í–º–µ—Å—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å fallback ¬±1¬∞

### 5. –ü–ª–∞–≥–∏–Ω –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω
- **–ö–æ–º–∞–Ω–¥–∞:** `make clean && make`
- **–í—Ä–µ–º—è:** 2025-11-01 16:20
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

---

## üìê –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –§–æ—Ä–º—É–ª–∞:
```cpp
half_fov_v = FOV / 2
pitch_min = LAT_MIN + half_fov_v + MARGIN  // -32¬∞ + ...
pitch_max = LAT_MAX - half_fov_v - MARGIN  // +22¬∞ - ...

pitch = CLAMP(pitch, pitch_min, pitch_max)
```

### –ö–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏:

**FOV ‚â§ 43¬∞:**
- pitch_max ‚â• 0¬∞ ‚Üí –∫–∞–º–µ—Ä–∞ –º–æ–∂–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –≤—ã—à–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞ ‚úÖ

**43¬∞ < FOV ‚â§ 48¬∞:**
- -5¬∞ < pitch_max < 0¬∞ ‚Üí –∫–∞–º–µ—Ä–∞ —á—É—Ç—å –≤—ã—à–µ —Å–µ—Ä–µ–¥–∏–Ω—ã ‚ö†Ô∏è

**FOV > 48¬∞:**
- pitch_max < -5¬∞ ‚Üí –∫–∞–º–µ—Ä–∞ –Ω–∏–∂–µ —Å–µ—Ä–µ–¥–∏–Ω—ã ‚ùå

---

## üéÆ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è —à–∏—Ä–æ–∫–æ–≥–æ –æ–±–∑–æ—Ä–∞ (—Å—Ç–∞—Ä—Ç–æ–≤—ã–π):
```
ball_radius = 60px
FOV = 70¬∞
pitch_max = -13.5¬∞

+ –®–∏—Ä–æ–∫–∏–π —É–≥–æ–ª –æ–±–∑–æ—Ä–∞ –ø–æ–ª—è
- –ö–∞–º–µ—Ä–∞ –Ω–µ –º–æ–∂–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –≤–≤–µ—Ä—Ö
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ ¬±1¬∞ —Ç–æ–ª—å–∫–æ
```

### –ß—Ç–æ–±—ã –ø–æ–¥–Ω—è—Ç—å –∫–∞–º–µ—Ä—É –≤–≤–µ—Ä—Ö:
```
1. –ù–∞–∂–º–∏—Ç–µ Q –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ (—É–º–µ–Ω—å—à–∞–µ–º —Ä–∞–¥–∏—É—Å)
2. ball_radius ‚Üí 5-15px
3. FOV ‚Üí 30-40¬∞
4. pitch_max ‚Üí +1.5¬∞ –¥–æ +6.5¬∞
5. –ù–∞–∂–º–∏—Ç–µ W - –∫–∞–º–µ—Ä–∞ –ø–æ–¥–Ω–∏–º–µ—Ç—Å—è!
```

### –î–ª—è —Å–ª–µ–∂–µ–Ω–∏—è –∑–∞ –º—è—á–æ–º:
```
ball_radius = 15-25px
FOV = 40-50¬∞
pitch_max = -3.5¬∞ –¥–æ +1.5¬∞

+ –ë–∞–ª–∞–Ω—Å –æ–±–∑–æ—Ä–∞ –∏ –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç–∏
+ –ú–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Ä–∞–∑–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
```

---

## üîç –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏:
```bash
GST_DEBUG=nvdsvirtualcam:3 python3 test_virtual_camera_keyboard.py ...
```

### –õ–æ–≥–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ FOV:
```
INFO: FOV=70.0¬∞ ‚Üí –ì—Ä–∞–Ω–∏—Ü—ã: yaw[-27.3, 27.3], pitch[-6.0, -4.0]
INFO: FOV=44.2¬∞ ‚Üí –ì—Ä–∞–Ω–∏—Ü—ã: yaw[-44.0, 44.0], pitch[-9.4, -0.6]
INFO: FOV=40.0¬∞ ‚Üí –ì—Ä–∞–Ω–∏—Ü—ã: yaw[-53.5, 53.5], pitch[-11.5, 1.5]
```

---

## üí° –ü–æ—á–µ–º—É –ø–∞–Ω–æ—Ä–∞–º–∞ –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞?

### –í–µ—Ä–æ—è—Ç–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **–ö–∞–º–µ—Ä—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—è**
   - –ù–µ–±–æ –∑–∞–Ω–∏–º–∞–µ—Ç –º–∞–ª–æ –º–µ—Å—Ç–∞ (–¥–æ +22¬∞)
   - –ü–æ–ª–µ –≤–∏–¥–Ω–æ –¥–∞–ª–µ–∫–æ –≤–Ω–∏–∑ (–¥–æ -32¬∞)

2. **–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞ —Ñ—É—Ç–±–æ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è**
   - –í–µ—Ä—Ö: –≥–æ—Ä–∏–∑–æ–Ω—Ç + –Ω–µ–±–æ = –º–∞–ª–æ –≥—Ä–∞–¥—É—Å–æ–≤
   - –ù–∏–∑: –ø–æ–ª–µ —É—Ö–æ–¥–∏—Ç –≤–¥–∞–ª—å = –º–Ω–æ–≥–æ –≥—Ä–∞–¥—É—Å–æ–≤

3. **Stitching –æ–±—Ä–µ–∑–∞–ª –≤–µ—Ä—Ö**
   - –í–æ–∑–º–æ–∂–Ω–æ –≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞ –∏ –æ–±—Ä–µ–∑–∞–Ω–∞

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Å—ä—ë–º–∫–∏ —Å —É—Ä–æ–≤–Ω—è –ø–æ–ª—è!** ‚úÖ

---

## üîß –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π —Å–≤–æ–±–æ–¥—ã

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£–≤–µ–ª–∏—á–∏—Ç—å LAT_MAX (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç)

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å—Ö–æ–¥–Ω–æ–µ –≤–∏–¥–µ–æ - –µ—Å—Ç—å –ª–∏ –ø–æ–ª–µ–∑–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤—ã—à–µ +22¬∞?

–ï—Å–ª–∏ –¥–∞:
```cpp
// –í nvdsvirtualcam_config.h:
constexpr float LAT_MAX = +35.0f;  // –ë—ã–ª–æ +22.0f
```

–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ:
```bash
cd src && make clean && make
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞–ª—ã–π FOV

–ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ Q —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å FOV ‚Üí –±–æ–ª—å—à–µ —Å–≤–æ–±–æ–¥—ã –≤–≤–µ—Ä—Ö!

---

## üìã –ò—Ç–æ–≥–æ

### –ù–∞–π–¥–µ–Ω–æ:
- ‚ùå –°—Ç–∞—Ä—Ç–æ–≤—ã–π FOV –±—ã–ª 44.2¬∞ –≤–º–µ—Å—Ç–æ 70¬∞
- ‚ùå –ö–∞–º–µ—Ä–∞ –Ω–µ –º–æ–≥–ª–∞ –ø–æ–¥–Ω—è—Ç—å—Å—è –≤—ã—à–µ -0.6¬∞ –¥–∞–∂–µ –ø—Ä–∏ FOV=44¬∞
- ‚ùå –ì—Ä–∞–Ω–∏—Ü—ã –≤ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö –∫–æ–¥–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–ª–∏
- ‚ùå –ü–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç–∞—è –ø–∞–Ω–æ—Ä–∞–º–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞—Å—å

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –°—Ç–∞—Ä—Ç–æ–≤—ã–π ball_radius = 60px ‚Üí FOV = 70¬∞
- ‚úÖ –ì—Ä–∞–Ω–∏—Ü—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ FOV
- ‚úÖ –£—á—Ç–µ–Ω–∞ –ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –ø–∞–Ω–æ—Ä–∞–º—ã
- ‚úÖ –ü–ª–∞–≥–∏–Ω –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω

### –û—Å—Ç–∞–ª–æ—Å—å:
- ‚ö†Ô∏è –ê—Å–∏–º–º–µ—Ç—Ä–∏—è –ø–∞–Ω–æ—Ä–∞–º—ã - —ç—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –≥–µ–æ–º–µ—Ç—Ä–∏–∏, –Ω–µ –±–∞–≥
- üí° –î–ª—è –ø–æ–¥—ä—ë–º–∞ –∫–∞–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞–ª—ã–π FOV (Q)
- üí° –ò–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ LAT_MAX –µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –≤—ã—à–µ

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** ‚úÖ
