# –ü–æ–¥–¥–µ—Ä–∂–∫–∞ FOV=70¬∞ —Å –≥—Ä–∞–Ω–∏—á–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π FOV = 70¬∞
- –ö–∞–º–µ—Ä–∞ –º–æ–∂–µ—Ç –∑—É–º–∏—Ç—å –¥–æ 70¬∞ (—à–∏—Ä–æ–∫–∏–π —É–≥–æ–ª –æ–±–∑–æ—Ä–∞)
- –ü—Ä–∏ FOV=70¬∞ –∫–∞–¥—Ä –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –ø–∞–Ω–æ—Ä–∞–º—É "–≤–ø—Ä–∏—Ç—ã–∫"

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≥—Ä–∞–Ω–∏—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –¥–≤–∏–∂–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ FOV
- **–ß–µ–º –±–æ–ª—å—à–µ FOV ‚Üí —Ç–µ–º –º–µ–Ω—å—à–µ –æ–±–ª–∞—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è –∫–∞–º–µ—Ä—ã**
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ –∫–∞–º–µ—Ä–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∫–∞–∂–µ—Ç —á—ë—Ä–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –ø–∞–Ω–æ—Ä–∞–º—ã

### 3. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ pitch –ø—Ä–∏ –±–æ–ª—å—à–æ–º FOV
- –ü—Ä–∏ FOV > 54¬∞ (–≤—ã—Å–æ—Ç–∞ –ø–∞–Ω–æ—Ä–∞–º—ã) –∫–∞–º–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
- Pitch –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞ -5¬∞ (—Ü–µ–Ω—Ç—Ä –ø–∞–Ω–æ—Ä–∞–º—ã)
- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ (yaw) –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

---

## üéÆ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞:
```bash
cd /home/nvidia/deep_cv_football/my_virt_cam
python3 test_virtual_camera_keyboard.py ../new_week/left.mp4 ../new_week/right.mp4
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ FOV=70¬∞:

**–®–∞–≥ 1: –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º FOV –¥–æ –º–∞–∫—Å–∏–º—É–º–∞**
```
–ù–∞–∂–º–∏—Ç–µ –∫–ª–∞–≤–∏—à—É E –º–Ω–æ–≥–æ —Ä–∞–∑ (15-20 —Ä–∞–∑)
‚Üí –†–∞–¥–∏—É—Å –º—è—á–∞ —É–≤–µ–ª–∏—á–∏—Ç—Å—è –¥–æ 60px
‚Üí FOV –¥–æ–ª–∂–µ–Ω –¥–æ—Å—Ç–∏—á—å 70.0¬∞
```

**–®–∞–≥ 2: –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º**
```
‚öΩ Ball: ( 1200, 950) | R: 60.0px | FOV: 70.0¬∞ (‚Üí70.0¬∞) | TS: 0.055 | Up: 42
                                        ‚Üë         ‚Üë
                                  —Ç–µ–∫—É—â–∏–π   —Ü–µ–ª–µ–≤–æ–π
```

**–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É pitch**
```
‚Ä¢ –ù–∞–∂–º–∏—Ç–µ W/S (–¥–≤–∏–∂–µ–Ω–∏–µ –º—è—á–∞ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑)
‚Ä¢ –ö–∞–º–µ—Ä–∞ –ù–ï –¥–æ–ª–∂–Ω–∞ –¥–≤–∏–≥–∞—Ç—å—Å—è –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ (pitch –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω)
‚Ä¢ –¢–æ–ª—å–∫–æ yaw (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å) —Ä–∞–±–æ—Ç–∞–µ—Ç
```

**–®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥—Ä–∞–Ω–∏—Ü—ã**
```
‚Ä¢ –î–≤–∏–≥–∞–π—Ç–µ –º—è—á –≤–ª–µ–≤–æ-–≤–ø—Ä–∞–≤–æ (A/D)
‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–∞ –∫—Ä–∞—è—Ö –∫–∞–¥—Ä–∞ –Ω–µ—Ç —á—ë—Ä–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
‚Ä¢ –ï—Å–ª–∏ –µ—Å—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã - —É–≤–µ–ª–∏—á—å—Ç–µ MARGIN –≤ –∫–æ–¥–µ
```

**–®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä—É–µ–º —É–º–µ–Ω—å—à–µ–Ω–∏–µ FOV**
```
‚Ä¢ –ù–∞–∂–º–∏—Ç–µ Q –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ (—É–º–µ–Ω—å—à–∞–µ–º —Ä–∞–¥–∏—É—Å –º—è—á–∞)
‚Ä¢ FOV –Ω–∞—á–Ω—ë—Ç —É–º–µ–Ω—å—à–∞—Ç—å—Å—è: 70¬∞ ‚Üí 60¬∞ ‚Üí 50¬∞ ‚Üí 40¬∞
‚Ä¢ –ü—Ä–∏ FOV < 54¬∞ pitch —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
‚Ä¢ –¢–µ–ø–µ—Ä—å W/S –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å (–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ)
```

---

## üìä –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö FOV

| FOV | Yaw –¥–∏–∞–ø–∞–∑–æ–Ω | Pitch –¥–∏–∞–ø–∞–∑–æ–Ω | –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ |
|-----|-------------|----------------|----------------------|
| 40¬∞ | 107¬∞        | 12¬∞            | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é |
| 50¬∞ | 89¬∞         | 3¬∞             | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ |
| 60¬∞ | 71¬∞         | –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù   | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| 70¬∞ | 54¬∞         | –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù   | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |

---

## üîß –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏:
```bash
GST_DEBUG=nvdsvirtualcam:3 python3 test_virtual_camera_keyboard.py ../new_week/left.mp4 ../new_week/right.mp4
```

### –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ª–æ–≥–∞—Ö:

**–ü—Ä–∏ FOV=70¬∞:**
```
INFO: FOV=70.0¬∞ ‚Üí –ì—Ä–∞–Ω–∏—Ü—ã: yaw[-27.3, 27.3], pitch LOCKED at -5.0¬∞ (FOV>pano)
```

**–ü—Ä–∏ FOV=50¬∞:**
```
INFO: FOV=50.0¬∞ ‚Üí Boundaries: yaw[-44.5, 44.5], pitch[-7.5, -2.5]
```

**–ï—Å–ª–∏ FOV –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç:**
```
WARNING: FOV clamped: 72.5¬∞ ‚Üí 70.0¬∞ (limits: 40.0-70.0¬∞)
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∑–∞–ø–∞—Å (MARGIN):
**–§–∞–π–ª:** `src/gstnvdsvirtualcam.cpp:191`
```cpp
const float MARGIN = 0.5f;  // –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 1.0f –¥–ª—è –±–æ–ª—å—à–µ–≥–æ –∑–∞–ø–∞—Å–∞
```

### –ò–∑–º–µ–Ω–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π FOV:
**–§–∞–π–ª 1:** `src/nvdsvirtualcam_config.h:41`
```cpp
constexpr float FOV_MAX = 70.0f;  // –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –Ω—É–∂–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

**–§–∞–π–ª 2:** `test_virtual_camera_keyboard.py:167`
```python
target_fov = max(40.0, min(70.0, base_fov * zoom_factor))  # –ò–∑–º–µ–Ω–∏—Ç—å 70.0
```

**–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```bash
cd src
make clean && make
```

---

## üìñ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ö–∞–∂–¥—ã–π –∫–∞–¥—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:

1. **–†–∞—Å—á—ë—Ç —Ü–µ–ª–µ–≤–æ–≥–æ FOV** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–º–µ—Ä–∞ –º—è—á–∞
   ```
   base_fov = 30.0 + (radius - 5.0) √ó 0.95
   target_fov = base_fov √ó zoom_factor
   target_fov = CLAMP(target_fov, 40.0, 70.0)
   ```

2. **–ü–ª–∞–≤–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ** —Ç–µ–∫—É—â–µ–≥–æ FOV
   ```
   fov += (target_fov - fov) √ó smooth_factor
   fov = CLAMP(fov, 40.0, 70.0)
   ```

3. **–†–∞—Å—á—ë—Ç –≥—Ä–∞–Ω–∏—Ü –¥–≤–∏–∂–µ–Ω–∏—è** (–≤ `apply_edge_safe_limits`)
   ```cpp
   half_fov_h = fov √ó 1.777 √ó 0.5  // –ü–æ–ª–æ–≤–∏–Ω–∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ FOV
   half_fov_v = fov √ó 0.5           // –ü–æ–ª–æ–≤–∏–Ω–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ FOV

   yaw_min = -90¬∞ + half_fov_h + MARGIN
   yaw_max = +90¬∞ - half_fov_h - MARGIN
   pitch_min = -32¬∞ + half_fov_v + MARGIN
   pitch_max = +22¬∞ - half_fov_v - MARGIN
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ pitch**
   ```cpp
   if (fov > 54¬∞) {  // –ë–æ–ª—å—à–µ –≤—ã—Å–æ—Ç—ã –ø–∞–Ω–æ—Ä–∞–º—ã
       pitch_min = -5¬∞;  // –¶–µ–Ω—Ç—Ä –ø–∞–Ω–æ—Ä–∞–º—ã
       pitch_max = -5¬∞;  // –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
   }
   ```

5. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π**
   ```cpp
   yaw = CLAMP(yaw, yaw_min, yaw_max)
   pitch = CLAMP(pitch, pitch_min, pitch_max)
   ```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Å–ª–µ–∂–µ–Ω–∏—è –∑–∞ –º—è—á–æ–º:
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ FOV = 40-50¬∞**
- –ö–∞–º–µ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≤–æ–±–æ–¥—É –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
- –ú–æ–∂–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –º—è—á–æ–º –≤ –ª—é–±–æ–π —Ç–æ—á–∫–µ –ø–æ–ª—è

### –î–ª—è —à–∏—Ä–æ–∫–æ—É–≥–æ–ª—å–Ω–æ–≥–æ –æ–±–∑–æ—Ä–∞:
- **–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FOV = 60-70¬∞**
- –®–∏—Ä–æ–∫–∏–π —É–≥–æ–ª –æ–±–∑–æ—Ä–∞ –ø–æ–ª—è
- –ö–∞–º–µ—Ä–∞ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω–æ–π –æ–±–∑–æ—Ä–Ω–æ–π —Å—ä—ë–º–∫–∏

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **src/nvdsvirtualcam_config.h**
   - FOV_MAX = 70.0f
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –ø–∞–Ω–æ—Ä–∞–º—ã (LAT_MIN/MAX, LON_MIN/MAX)

2. **src/gstnvdsvirtualcam.cpp**
   - `smooth_camera_tracking()` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ FOV
   - `apply_edge_safe_limits()` - –ù–û–í–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è –≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è
   - `update_camera_from_ball()` - —Ä–∞—Å—à–∏—Ä–µ–Ω –¥–∏–∞–ø–∞–∑–æ–Ω —Ä–∞–¥–∏—É—Å–∞ –¥–æ 100px

3. **test_virtual_camera_keyboard.py**
   - –û–±–Ω–æ–≤–ª—ë–Ω –≤—ã–≤–æ–¥ —Å—Ç–∞—Ç—É—Å–∞ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∏ —Ü–µ–ª–µ–≤–æ–π FOV)
   - –û–±–Ω–æ–≤–ª—ë–Ω –ª–∏–º–∏—Ç FOV_MAX –¥–æ 70.0

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: FOV –ø—Ä–µ–≤—ã—à–∞–µ—Ç 70¬∞
**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /home/nvidia/deep_cv_football/my_virt_cam/src
make clean && make
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é (–∑–∞–∫—Ä–æ–π—Ç–µ —Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å)
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ß—ë—Ä–Ω—ã–µ —É–≥–ª—ã –Ω–∞ –∫—Ä–∞—è—Ö –ø—Ä–∏ FOV=70¬∞
**–†–µ—à–µ–Ω–∏–µ 1:** –£–≤–µ–ª–∏—á–∏—Ç—å MARGIN
```cpp
// –í src/gstnvdsvirtualcam.cpp:191
const float MARGIN = 1.0f;  // –ë—ã–ª–æ 0.5f
```

**–†–µ—à–µ–Ω–∏–µ 2:** –£–º–µ–Ω—å—à–∏—Ç—å FOV_MAX
```cpp
// –í src/nvdsvirtualcam_config.h:41
constexpr float FOV_MAX = 65.0f;  // –ë—ã–ª–æ 70.0f
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–∞–º–µ—Ä–∞ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ
**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–∏ FOV > 54¬∞!**
- Pitch –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã
- –£–º–µ–Ω—å—à–∏—Ç–µ FOV (–∫–ª–∞–≤–∏—à–∞ Q) –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

- **–ü–ª–∞–≥–∏–Ω —Å–æ–±—Ä–∞–Ω:** ‚úÖ (2025-11-01 15:27)
- **FOV=70¬∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:** ‚úÖ
- **–ì—Ä–∞–Ω–∏—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç:** ‚úÖ
- **–ê–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ pitch:** ‚úÖ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** ‚è≥ –û–∂–∏–¥–∞–µ—Ç –∑–∞–ø—É—Å–∫–∞

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**
