# ‚úÖ –ß–ò–°–¢–ê–Ø –°–ò–°–¢–ï–ú–ê –õ–ò–ú–ò–¢–û–í

## üéØ –§–∏–ª–æ—Å–æ—Ñ–∏—è: –û–î–ò–ù –ò–°–¢–û–ß–ù–ò–ö –ü–†–ê–í–î–´

–í—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã **–¢–û–õ–¨–ö–û –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ** - –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ `nvdsvirtualcam_config.h`.

---

## üìã –ï–î–ò–ù–°–¢–í–ï–ù–ù–´–ï –õ–ò–ú–ò–¢–´ (–≤ nvdsvirtualcam_config.h)

```cpp
// ========== –ì–†–ê–ù–ò–¶–´ –ü–ê–ù–û–†–ê–ú–´ ==========
constexpr float LON_MIN = -90.0f;   // –õ–µ–≤—ã–π –∫—Ä–∞–π –ø–∞–Ω–æ—Ä–∞–º—ã
constexpr float LON_MAX = +90.0f;   // –ü—Ä–∞–≤—ã–π –∫—Ä–∞–π –ø–∞–Ω–æ—Ä–∞–º—ã
constexpr float LAT_MIN = -32.0f;   // –ù–∏–∑ –ø–∞–Ω–æ—Ä–∞–º—ã
constexpr float LAT_MAX = +22.0f;   // –í–µ—Ä—Ö –ø–∞–Ω–æ—Ä–∞–º—ã

// ========== –°–¢–ê–†–¢–û–í–´–ï –ó–ù–ê–ß–ï–ù–ò–Ø ==========
constexpr float DEFAULT_YAW = 0.0f;     // –¶–µ–Ω—Ç—Ä –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏
constexpr float DEFAULT_PITCH = 15.0f;  // –ù–∞–∫–ª–æ–Ω –≤–≤–µ—Ä—Ö-–≤–Ω–∏–∑
constexpr float DEFAULT_ROLL = 0.0f;    // –ë–µ–∑ –Ω–∞–∫–ª–æ–Ω–∞
constexpr float DEFAULT_FOV = 68.0f;    // –°–¢–ê–†–¢–û–í–´–ô FOV = 68¬∞

// ========== –õ–ò–ú–ò–¢–´ –ö–ê–ú–ï–†–´ ==========
constexpr float YAW_MIN = LON_MIN;      // -90¬∞
constexpr float YAW_MAX = LON_MAX;      // +90¬∞
constexpr float PITCH_MIN = LAT_MIN;    // -32¬∞
constexpr float PITCH_MAX = LAT_MAX;    // +22¬∞
constexpr float ROLL_MIN = -28.0f;      // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–∫–ª–æ–Ω –≤–ª–µ–≤–æ
constexpr float ROLL_MAX = 28.0f;       // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–∫–ª–æ–Ω –≤–ø—Ä–∞–≤–æ
constexpr float FOV_MIN = 40.0f;        // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É–≥–æ–ª –æ–±–∑–æ—Ä–∞
constexpr float FOV_MAX = 68.0f;        // –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ô FOV = 68¬∞ ‚≠ê
```

---

## üîß –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ª–∏–º–∏—Ç—ã:

### 1Ô∏è‚É£ **FOV –ª–∏–º–∏—Ç—ã** (FOV_MIN = 40¬∞, FOV_MAX = 68¬∞)

**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤:** `smooth_camera_tracking()` (—Å—Ç—Ä–æ–∫–∞ 174-178)

```cpp
vcam->fov = CLAMP(vcam->fov,
                 NvdsVirtualCamConfig::FOV_MIN,  // 40¬∞
                 NvdsVirtualCamConfig::FOV_MAX); // 68¬∞
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –ö–∞–º–µ—Ä–∞ –Ω–µ –º–æ–∂–µ—Ç –∑—É–º–∏—Ä–æ–≤–∞—Ç—å —Å–∏–ª—å–Ω–µ–µ 68¬∞ (—à–∏—Ä–æ–∫–∏–π —É–≥–æ–ª) –∏–ª–∏ –±–ª–∏–∂–µ 40¬∞ (—É–∑–∫–∏–π —É–≥–æ–ª).

---

### 2Ô∏è‚É£ **PITCH –ª–∏–º–∏—Ç—ã** (PITCH_MIN = -32¬∞, PITCH_MAX = +22¬∞)

**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤:** GStreamer property definition (—Å—Ç—Ä–æ–∫–∞ 1441-1445)

```cpp
g_param_spec_float("pitch", "Pitch", "Camera pitch angle",
                  NvdsVirtualCamConfig::PITCH_MIN,  // -32¬∞
                  NvdsVirtualCamConfig::PITCH_MAX,  // +22¬∞
                  NvdsVirtualCamConfig::DEFAULT_PITCH,
                  ...);
```

**–≠—Ñ—Ñ–µ–∫—Ç:** GStreamer –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è pitch –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ properties.

---

### 3Ô∏è‚É£ **YAW –ª–∏–º–∏—Ç—ã** (YAW_MIN = -90¬∞, YAW_MAX = +90¬∞)

**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤:** GStreamer property definition (—Å—Ç—Ä–æ–∫–∞ 1434-1438)

```cpp
g_param_spec_float("yaw", "Yaw", "Camera yaw angle",
                  NvdsVirtualCamConfig::YAW_MIN,   // -90¬∞
                  NvdsVirtualCamConfig::YAW_MAX,   // +90¬∞
                  NvdsVirtualCamConfig::DEFAULT_YAW,
                  ...);
```

**–≠—Ñ—Ñ–µ–∫—Ç:** –ö–∞–º–µ—Ä–∞ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è –ª–µ–≤–µ–µ -90¬∞ –∏–ª–∏ –ø—Ä–∞–≤–µ–µ +90¬∞.

---

## ‚ùå –ß–¢–û –£–î–ê–õ–ï–ù–û:

### 1. **–§—É–Ω–∫—Ü–∏—è `apply_edge_safe_limits()`** - –£–î–ê–õ–ï–ù–ê –ü–û–õ–ù–û–°–¢–¨–Æ

**–ü—Ä–∏—á–∏–Ω–∞:** –ò–º–µ–ª–∞ –∂—ë—Å—Ç–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É:

```cpp
// ‚ùå –°–¢–ê–†–´–ô –ö–û–î (–£–î–ê–õ–Å–ù):
float pitch_min = -15.0f + half_fov_v + MARGIN;  // –ñ—ë—Å—Ç–∫–æ–µ -15¬∞!
float pitch_max = +35.0f - half_fov_v - MARGIN;  // –ñ—ë—Å—Ç–∫–æ–µ +35¬∞!
```

–≠—Ç–∏ —á–∏—Å–ª–∞ **–ù–ï** –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏ –ø—É—Ç–∞–Ω–∏—Ü—É!

### 2. **–ë–µ—Å–ø–æ–ª–µ–∑–Ω—ã–π –∫–æ–¥ save/restore** - –£–î–ê–õ–Å–ù

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–ª `target_pitch`, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–ª –µ–≥–æ, –≤—ã–∑—ã–≤–∞–ª (–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π!) `apply_edge_safe_limits`, –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª –æ–±—Ä–∞—Ç–Ω–æ. –≠—Ç–æ –±—ã–ª–æ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ!

```cpp
// ‚ùå –°–¢–ê–†–´–ô –ö–û–î (–£–î–ê–õ–Å–ù):
gfloat old_target_pitch = vcam->target_pitch;
vcam->target_pitch = current_pitch;
//apply_edge_safe_limits(vcam);  // –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω!
vcam->target_pitch = old_target_pitch;  // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
```

---

## ‚úÖ –ò–¢–û–ì–û: 3 –ú–ï–°–¢–ê –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø –õ–ò–ú–ò–¢–û–í

1. **FOV** ‚Üí CLAMP –≤ `smooth_camera_tracking()` (40-68¬∞)
2. **PITCH** ‚Üí GStreamer property limits (-32¬∞ –¥–æ +22¬∞)
3. **YAW** ‚Üí GStreamer property limits (-90¬∞ –¥–æ +90¬∞)

**–í–°–Å!** –ë–æ–ª—å—à–µ –Ω–∏–∫–∞–∫–∏—Ö —Å–∫—Ä—ã—Ç—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π!

---

## üéØ –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π FOV:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `nvdsvirtualcam_config.h`
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 41:
   ```cpp
   constexpr float FOV_MAX = 68.0f;  // ‚Üê –ï–î–ò–ù–°–¢–í–ï–ù–ù–û–ï –º–µ—Å—Ç–æ!
   ```
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ: `cd src && make clean && make`
4. –ì–æ—Ç–æ–≤–æ! ‚úÖ

---

## üìå –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π:

```bash
# –ü–æ–∏—Å–∫ –≤—Å–µ—Ö CLAMP –¥–ª—è pitch:
grep -n "CLAMP.*pitch" gstnvdsvirtualcam.cpp

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–ï–¢! (–±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ –∏–∑ apply_edge_safe_limits)

# –ü–æ–∏—Å–∫ –≤—Å–µ—Ö –∂—ë—Å—Ç–∫–∏—Ö —á–∏—Å–µ–ª –¥–ª—è —É–≥–ª–æ–≤:
grep -nE "(pitch|yaw|fov).*(=|-).{0,5}[0-9]+\.[0-9]f" gstnvdsvirtualcam.cpp

# –†–µ–∑—É–ª—å—Ç–∞—Ç: —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ!
```

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å **–µ–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–∏–º–∏—Ç–æ–≤** –±–µ–∑ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π:
- ‚úÖ –í—Å–µ –ª–∏–º–∏—Ç—ã –≤ **–æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ** (nvdsvirtualcam_config.h)
- ‚úÖ FOV_MAX = 68¬∞ (–∫–∞–∫ –≤—ã —Ö–æ—Ç–µ–ª–∏)
- ‚úÖ DEFAULT_FOV = 68¬∞ (—Å—Ç–∞—Ä—Ç–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- ‚úÖ –ù–µ—Ç —Å–∫—Ä—ã—Ç—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –≤ –∫–æ–¥–µ
- ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π!
